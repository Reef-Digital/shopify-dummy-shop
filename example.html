<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Widget Library Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .example-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .widget-container {
            border: 2px dashed #ddd;
            min-height: 200px;
            margin: 20px 0;
            border-radius: 8px;
        }
        pre {
            background: #f8f8f8;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .auto-mount-example {
            border: 2px solid #e3f2fd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Search Widget Library Examples</h1>
        
        <div class="example-section">
            <h2>Method 1: Auto-mount with data attribute</h2>
            <p>Simply add <code>data-search-widget</code> to any element:</p>
            <pre>&lt;div data-search-widget&gt;&lt;/div&gt;</pre>
            
            <div class="auto-mount-example" data-search-widget></div>
        </div>

        <div class="example-section">
            <h2>Method 2: Manual mounting with JavaScript</h2>
            <p>Use the JavaScript API to mount the widget programmatically:</p>
            <pre>
// Using the global SearchWidget object
SearchWidget.mount('#my-search-container');

// Or create a new instance
const widget = SearchWidget.createSearchWidget();
widget.mount('#my-search-container');
            </pre>
            
            <div id="manual-mount-container" class="widget-container"></div>
            <button onclick="mountWidget()">Mount Widget</button>
            <button onclick="unmountWidget()">Unmount Widget</button>
        </div>

        <div class="example-section">
            <h2>Method 3: Custom styling</h2>
            <p>You can apply custom CSS classes and styles:</p>
            <pre>
SearchWidget.mount('#styled-container', {
    className: 'my-custom-class',
    style: { 
        border: '2px solid #blue',
        borderRadius: '12px'
    }
});
            </pre>
            
            <div id="styled-container" class="widget-container"></div>
            <button onclick="mountStyledWidget()">Mount Styled Widget</button>
        </div>

        <div class="example-section">
            <h2>Method 4: SearchInput Component</h2>
            <p>Use the SearchInput component directly with React:</p>
            <pre>
// Using React directly
const { SearchInput } = SearchWidget;
ReactDOM.render(
    React.createElement(SearchInput, {
        placeholder: "Search products...",
        maxWidth: "400px",
        onSearch: (results) => console.log('Search results:', results),
        onLoadingChange: (loading) => console.log('Loading:', loading)
    }),
    document.getElementById('search-input-container')
);
            </pre>
            
            <div id="search-input-container" class="widget-container"></div>
            <button onclick="mountSearchInput()">Mount SearchInput Component</button>
            <button onclick="unmountSearchInput()">Unmount SearchInput</button>
        </div>
    </div>

    <!-- Load the search widget library (standalone version with React bundled) -->
    <script src="./dist/lib/search-widget.standalone.umd.js"></script>

    <script>
        let manualWidget = null;
        let searchInputWidget = null;

        function mountWidget() {
            if (!manualWidget) {
                manualWidget = SearchWidget.createSearchWidget();
                manualWidget.mount('#manual-mount-container');
            }
        }

        function unmountWidget() {
            if (manualWidget) {
                manualWidget.unmount();
                manualWidget = null;
            }
        }

        function mountStyledWidget() {
            if (typeof SearchWidget === 'undefined') {
                console.error('SearchWidget library not loaded');
                alert('SearchWidget library not loaded');
                return;
            }
            SearchWidget.mount('#styled-container', {
                className: 'custom-search-widget',
                style: { 
                    border: '2px solid #2196F3',
                    borderRadius: '12px',
                    padding: '10px'
                }
            });
        }

        function mountSearchInput() {
            // Check if SearchWidget is available
            if (typeof SearchWidget === 'undefined') {
                console.error('SearchWidget library not loaded. Please ensure the script is loaded correctly.');
                alert('SearchWidget library not loaded. Please check the console for details.');
                return;
            }

            if (!searchInputWidget) {
                const container = document.getElementById('search-input-container');
                container.innerHTML = ''; // Clear any existing content
                
                // Create a wrapper div for the SearchInput component
                const wrapper = document.createElement('div');
                wrapper.className = 'search-widget-container';
                container.appendChild(wrapper);
                
                // Access React and ReactDOM from the SearchWidget global object
                const React = SearchWidget._React;
                const ReactDOM = SearchWidget._ReactDOM;
                
                if (React && ReactDOM) {
                    // Render the SearchInput component
                    ReactDOM.render(
                        React.createElement(SearchWidget.SearchInput, {
                            placeholder: "Search products...",
                            onSearch: (results) => {
                                console.log('Search results:', results);
                                // You can handle search results here
                            },
                            onLoadingChange: (loading) => {
                                console.log('Loading:', loading);
                                // You can handle loading state here
                            }
                        }),
                        wrapper
                    );
                    
                    searchInputWidget = { container: wrapper, ReactDOM: ReactDOM };
                } else {
                    console.error('React or ReactDOM not available in SearchWidget');
                }
            }
        }

        function unmountSearchInput() {
            if (searchInputWidget) {
                searchInputWidget.ReactDOM.unmountComponentAtNode(searchInputWidget.container);
                if (searchInputWidget.container.parentNode) {
                    searchInputWidget.container.parentNode.removeChild(searchInputWidget.container);
                }
                searchInputWidget = null;
            }
        }
    </script>
</body>
</html>
